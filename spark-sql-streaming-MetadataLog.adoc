== [[MetadataLog]] MetadataLog Contract -- Metadata Storage

`MetadataLog` is the <<contract, abstraction>> of <<implementations, store metadata>> that can <<add, persist>>, <<get, retrieve>>, and <<purge, remove>> metadata (of type `T`).

[[contract]]
.MetadataLog Contract
[cols="30m,70",options="header",width="100%"]
|===
| Method
| Description

| add
a| [[add]]

[source, scala]
----
add(
  batchId: Long,
  metadata: T): Boolean
----

Adds metadata for a batch

| get
a| [[get]]

[source, scala]
----
get(batchId: Long): Option[T]
get(
  startId: Option[Long],
  endId: Option[Long]): Array[(Long, T)]
----

Retrieves metadata by batch id or batch range

Used when...FIXME

| getLatest
a| [[getLatest]]

[source, scala]
----
getLatest(): Option[(Long, T)]
----

Retrieves the latest-committed metadata (if available)

Used when...FIXME

| purge
a| [[purge]]

[source, scala]
----
purge(thresholdBatchId: Long): Unit
----

Used when...FIXME

|===

[[implementations]]
NOTE: <<spark-sql-streaming-HDFSMetadataLog.adoc#, HDFSMetadataLog>> is the direct implementation of the <<contract, MetadataLog Contract>> in Spark Structured Streaming.
