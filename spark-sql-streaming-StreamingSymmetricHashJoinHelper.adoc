== [[StreamingSymmetricHashJoinHelper]] StreamingSymmetricHashJoinHelper Utility

`StreamingSymmetricHashJoinHelper` is a Scala object with the following utility methods:

* <<getStateWatermarkPredicates, getStateWatermarkPredicates>>

* FIXME

=== [[getStateWatermarkPredicates]] Creating JoinStateWatermarkPredicates -- `getStateWatermarkPredicates` Object Method

[source, scala]
----
getStateWatermarkPredicates(
  leftAttributes: Seq[Attribute],
  rightAttributes: Seq[Attribute],
  leftKeys: Seq[Expression],
  rightKeys: Seq[Expression],
  condition: Option[Expression],
  eventTimeWatermark: Option[Long]): JoinStateWatermarkPredicates
----

`getStateWatermarkPredicates` tries to find the index of the <<spark-sql-streaming-EventTimeWatermark.adoc#delayKey, watermark attribute>> among the left keys first, and if not found, the right keys.

NOTE: The <<spark-sql-streaming-EventTimeWatermark.adoc#delayKey, watermark attribute>> is defined using <<spark-sql-streaming-Dataset-operators.adoc#withWatermark, Dataset.withWatermark>> operator.

`getStateWatermarkPredicates`...FIXME

NOTE: `getStateWatermarkPredicates` is used exclusively when `IncrementalExecution` is requested to <<spark-sql-streaming-IncrementalExecution.adoc#state, apply the state preparation rule for batch-specific configuration>> (while optimizing query plans with <<spark-sql-streaming-StreamingSymmetricHashJoinExec.adoc#, StreamingSymmetricHashJoinExec>> physical operators).
